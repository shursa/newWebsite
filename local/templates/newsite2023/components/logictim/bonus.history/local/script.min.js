BX.ready(function(){BX.bind(BX("generate_coupon"),"click",function(){var a=new Object();a.ACTION="ADD_COUPON";BX.ajax({url:"/bitrix/components/logictim/bonus.history/ajax.php",method:"POST",data:a,dataType:"json",onsuccess:function(b){if(b.COUPON&&b.COUPON!=""){BX.adjust(BX("partnet_coupon"),{text:b.COUPON})}if(b.ERROR_TEXT&&b.ERROR_TEXT!=""){BX.adjust(BX("coupon_error"),{text:b.ERROR_TEXT})}}})});BX.bind(BX("enter_coupon"),"click",function(a){a.preventDefault();var b=new Object();b.ACTION="ENTER_COUPON";b.COUPON_CODE=BX("enter_coupon_code").value;BX.ajax({url:"/bitrix/components/logictim/bonus.history/ajax.php",method:"POST",data:b,dataType:"json",onsuccess:function(c){if(c.COUPON&&c.COUPON!=""){BX.adjust(BX("partnet_coupon"),{text:c.COUPON})}if(c.ERROR_TEXT&&c.ERROR_TEXT!=""){BX.adjust(BX("coupon_error"),{text:c.ERROR_TEXT})}}})});BX.bind(BX("exit_bonus_link"),"click",function(){var a=new Object();a.ACTION="EXIT_BONUS";a.SUM=BX("exit_bonus_input").value;BX.ajax({url:"/bitrix/components/logictim/bonus.history/ajax.php",method:"POST",data:a,dataType:"json",onsuccess:function(b){if(b.RESULT.RESULT&&b.RESULT.RESULT!=""){if(b.RESULT.RESULT=="OK"){var c="send_ok"}else{var c="send_error"}BX.adjust(BX("exit_bonus_result"),{props:{className:c},html:b.RESULT.RESULT_TEXT})}}})})});